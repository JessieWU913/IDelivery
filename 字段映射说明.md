# 数据库字段映射说明

## sys_user 表字段映射关系

### 数据库字段 → Java Entity 字段

| 数据库列名 | Java属性名 | 类型 | 说明 |
|---------|----------|------|------|
| user_id | userId | Long | 用户ID(主键) |
| role_id | roleId | Long | 角色ID |
| **user_name** | **userName** | String | 用户账号 ⚠️ 注意:数据库是user_name,不是username |
| email | email | String | 用户邮箱 |
| **phonenumber** | **phonenumber** | String | 手机号码 ⚠️ 注意:数据库是phonenumber,不是phone |
| sex | sex | String | 用户性别(0男 1女 2未知) |
| password | password | String | 密码 |
| status | status | String | 帐号状态(0正常 1停用) |
| del_flag | delFlag | String | 删除标志(0存在 2删除) |
| login_date | loginDate | Date | 最后登录时间 |
| create_by | createBy | String | 创建者 |
| create_time | createTime | Date | 创建时间 |
| update_by | updateBy | String | 更新者 |
| update_time | updateTime | Date | 更新时间 |
| remark | remark | String | 备注 |
| **pic** | **pic** | String | 头像路径 |

## 重要提示

### ❌ 常见错误

1. **不要使用 `username`** - 数据库字段是 `user_name`
2. **不要使用 `phone`** - 数据库字段是 `phonenumber`
3. **sex 字段是存在的** - 不要删除相关代码

### ✅ MyBatis XML 中正确的写法

#### INSERT 语句
```xml
<if test="userName != null and userName != ''">user_name,</if>
<if test="phonenumber != null">phonenumber,</if>
<if test="pic != null">pic,</if>
<if test="sex != null">sex,</if>
```

#### UPDATE 语句
```xml
user_name=#{userName}, 
phonenumber=#{phonenumber}, 
pic=#{pic},
sex=#{sex}
```

#### SELECT WHERE 语句
```xml
WHERE u.user_name = #{userName}
AND u.phonenumber = #{phonenumber}
```

## 其他表字段映射

### sys_role 表
- role_id ← roleId
- role_name ← roleName
- role_sort ← roleSort
- status ← status
- create_time ← createTime
- remark ← remark

### t_product 表
- product_id ← productId
- category_id ← categoryId
- product_name ← productName
- product_img ← productImg
- product_price ← productPrice
- product_desc ← productDesc
- is_recommend ← isRecommend
- status ← status

### t_cart 表
- cart_id ← cartId
- user_id ← userId
- product_id ← productId
- quantity ← quantity
- create_time ← createTime

---

**最后更新时间:** 2025-11-10 15:08

**修复说明:** 已将 UserMapper.xml 中所有错误的字段名修正为与数据库实际结构一致。
